# ğŸ§§ Hash-Gift

Web3 é“¾ä¸Šå»ä¸­å¿ƒåŒ–å£ä»¤çº¢åŒ…ï¼Œé‡‡ç”¨ ECDSA ç­¾åå®ç°é˜²æŠ¢è·‘ (Anti-MEV)ã€‚

## æˆªå›¾

|          å‘çº¢åŒ…           |            é¢†çº¢åŒ…            |
| :-----------------------: | :--------------------------: |
| ![å‘çº¢åŒ…](assets/send.png) | ![é¢†çº¢åŒ…](assets/receive.png) |

## å¿«é€Ÿå¼€å§‹

```bash
# 1. å®‰è£…åˆçº¦ä¾èµ– + å¯åŠ¨æœ¬åœ°æµ‹è¯•ç½‘
cd contracts && forge install && anvil

# 2. éƒ¨ç½²åˆçº¦ (æ–°ç»ˆç«¯)
cd contracts && forge script script/Deploy.s.sol --rpc-url http://127.0.0.1:8545 --broadcast

# 3. å¯åŠ¨å‰ç«¯ (æ–°ç»ˆç«¯)
cd frontend && pnpm install && pnpm dev
```

### MetaMask Demo é…ç½®

1. **æ·»åŠ æµ‹è¯•ç½‘ç»œ**ï¼šè®¾ç½® â†’ ç½‘ç»œ â†’ æ·»åŠ ç½‘ç»œ

   - ç½‘ç»œåç§°: `Anvil`
   - RPC URL: `http://127.0.0.1:8545`
   - Chain ID: `31337`
   - è´§å¸ç¬¦å·: `ETH`

2. **å¯¼å…¥æµ‹è¯•è´¦æˆ·**ï¼šè®¾ç½® â†’ å¯¼å…¥è´¦æˆ· â†’ ç²˜è´´ç§é’¥ï¼ˆè‡ªè¡Œç”Ÿæˆï¼‰

## å·¥ä½œåŸç†

```
å‘é€æ–¹                              æ¥æ”¶æ–¹
   â”‚                                   â”‚
   â”‚ 1. ç”Ÿæˆå¯†é’¥å¯¹ (pubKey, privKey)    â”‚
   â”‚ 2. é“¾ä¸Šå­˜å‚¨ pubKey                 â”‚
   â”‚ 3. ç§ä¸‹å‘é€ privKey â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
   â”‚                                   â”‚
   â”‚                    4. ç”¨ privKey ç­¾åè‡ªå·±åœ°å€
   â”‚                    5. æäº¤ç­¾ååˆ°é“¾ä¸ŠéªŒè¯
   â”‚                                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ åˆçº¦éªŒè¯ç­¾å â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## é˜²æŠ¢è·‘åŸç†

**ä¼ ç»Ÿå£ä»¤çº¢åŒ…çš„æ¼æ´ï¼š**

```
âŒ ç”¨æˆ·å‘é€: claimPacket("å£ä»¤")
âŒ MEV Bot åœ¨ mempool çœ‹åˆ°å£ä»¤ï¼ŒæŠ¢å…ˆæäº¤
```

**Hash-Gift æ–¹æ¡ˆï¼š**

```solidity
// ç­¾åç»‘å®šé¢†å–è€…åœ°å€
bytes32 hash = keccak256(abi.encodePacked(packetId, msg.sender));
address signer = ECDSA.recover(hash, signature);
require(signer == packet.signer); // âœ… æ”»å‡»è€…æ— æ³•ä¼ªé€ ç­¾å
```

**ä¸ºä»€ä¹ˆå®‰å…¨ï¼Ÿ**

- ç­¾åå†…å®¹åŒ…å«é¢†å–è€…åœ°å€ (`msg.sender`)
- æ”»å‡»è€…æ²¡æœ‰ç§é’¥ï¼Œæ— æ³•ä¸ºè‡ªå·±åœ°å€ç”Ÿæˆæœ‰æ•ˆç­¾å
- å³ä½¿çœ‹åˆ°äº¤æ˜“å†…å®¹ï¼Œä¹Ÿæ— æ³•å¤ç”¨ä»–äººç­¾å

## æŠ€æœ¯æ ˆ

| å±‚çº§     | æŠ€æœ¯                        |
| -------- | --------------------------- |
| æ™ºèƒ½åˆçº¦ | Solidity + Foundry          |
| å‰ç«¯     | Next.js 16 + wagmi 3 + viem |
| å®‰å…¨æµ‹è¯• | Slither + Fuzz + Invariant  |

## æµ‹è¯•

```bash
# åˆçº¦æµ‹è¯• (24 tests)
cd contracts && forge test

# å‰ç«¯å®‰å…¨æµ‹è¯• (11 tests)
cd frontend && pnpm vitest run
```
